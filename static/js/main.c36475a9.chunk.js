(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{27:function(e,t,n){e.exports=n(62)},33:function(e,t,n){},38:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(7),o=n.n(c),i=n(11),u=n(12),s=n.n(u),l=n(16),m=n(4),f=(n(33),n(17)),b=n(19),d=Object(a.createContext)({flagCount:0,setFlagCount:function(){},gameIsOver:!1,setGameIsOver:function(){}}),v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(!(e<0||t<0||e>=n||t>=n))return n*e+t},h=function(e,t){var n=e%t;return[Math.floor(e/t),n]},O=function(e){var t=Object(a.useState)({}),n=Object(m.a)(t,2),c=n[0],o=n[1],u=Object(m.a)(e.board,2),s=u[0],l=u[1],O=Object(a.useState)(!1),p=Object(m.a)(O,2),j=p[0],E=p[1],C=Object(a.useContext)(d);Object(a.useEffect)((function(){o((function(t){return e.tile||t}))}),[e]);var g=e.boardSize,y=e.boardDimension,k=function(){C.setFlagCount(s.reduce((function(e,t,n){return t.isFlag?e+1:e}),0)),C.setWinner(s.reduce((function(e,t){return t.isClicked?e+1:e}),0)===s.length-C.mineCount&&s.reduce((function(e,t){return t.isFlag&&t.hasBomb?e+1:e}),0)===s.reduce((function(e,t){return t.hasBomb?e+1:e}),0))};return r.a.createElement("button",{onContextMenu:function(t){var n=Object(i.a)(s);!n[e.index].isClicked&&(C.mineCount-C.flagCount>0||n[e.index].isFlag)&&(n[e.index].isFlag=!n[e.index].isFlag,l(n)),k()},onClick:function(t){!function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Object(i.a)(s),r=a[t];if(!r.isClicked&&(!r.isFlag||n)){a[t].isClicked=!0,a[t].hasBomb&&(C.setGameIsOver(!0),a.forEach((function(t,n){return e(n,!0)})));var c=h(t,y),o=Object(m.a)(c,2),u=o[0],f=o[1];if(!a[t].hasBomb){for(var b=-1;b<2;b++)for(var d=-1;d<2;d++){var O=v(b+u,d+f,y);a[O]&&(a[t].neighbors+=a[O].hasBomb?1:0)}if(a[t].neighbors<=0)for(var p=-1;p<2;p++)for(var j=-1;j<2;j++){var E=v(p+u,j+f,y),g=a[E];g&&!g.hasBomb&&E!==t&&e(E)}}l(a)}}(e.index),k()},onMouseOver:function(e){1!==e.buttons&&2!==e.buttons||E(!0)},onMouseUp:function(){return E(!1)},onMouseLeave:function(){return E(!1)},className:"tile ".concat(c.isClicked&&"inset"," ").concat(!c.isClicked&&j&&"no-bomb inset"," ").concat(c.isClicked&&!c.hasBomb&&"no-bomb"),style:{width:g/y,height:g/y}},c.isClicked&&c.hasBomb&&r.a.createElement(f.a,{icon:b.a}),(!c.isClicked||c.hasBomb)&&c.isFlag&&r.a.createElement(f.a,{style:{color:"red"},icon:b.b}),c.isClicked&&!c.hasBomb&&c.neighbors>0?c.neighbors:"")},p=(n(38),function(e){var t=Object(a.useState)([]),n=Object(m.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(500),u=Object(m.a)(i,2),s=u[0];u[1];Object(a.useEffect)((function(){o(e.board)}),[e]);var l={gridTemplateColumns:"repeat(".concat(e.dimension,", 1fr)")};return r.a.createElement("div",{className:"game-board",style:l},c.map((function(t,n){return r.a.createElement(O,{key:n,index:n,tile:t,board:[c,o],boardDimension:e.dimension,boardSize:s})})))}),j=n(24),E=n.n(j),C=n(25),g=function(e){var t=Object(C.useStopwatch)({autoStart:!0}),n=t.seconds,c=t.minutes,o=(t.start,t.pause),i=t.reset,u=Object(a.useState)(":)"),s=Object(m.a)(u,2),l=s[0],f=s[1],b=Object(a.useState)(!1),v=Object(m.a)(b,2),h=v[0],O=v[1],p=Object(a.useContext)(d);Object(a.useEffect)((function(){O(e.mouseDown)}),[e]),Object(a.useEffect)((function(){f(p.winner?"\ud83d\ude0e":p.gameIsOver?"\u2620\ufe0f":h?":o":":)")}),[h,p]),Object(a.useEffect)((function(){(p.gameIsOver||p.winner)&&(o(),p.setTime("".concat(c<10?"0":"").concat(c,":").concat(n<10?"0":"").concat(n)))}),[p]);var j=Object(a.useState)("one"),g=Object(m.a)(j,2);g[0],g[1];return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__text"},"0",p.mineCount-p.flagCount),r.a.createElement("button",{onClick:function(){e.onClick(),i()},className:"header__button"},r.a.createElement(E.a,{className:"emoji",text:l})),r.a.createElement("div",{className:"header__text"},c<10&&"0",c,":",n<10&&"0",n))},y=function(e){Object(a.useContext)(d);var t=Object(m.a)(e.dimension,2);t[0],t[1];return r.a.createElement("footer",{className:"footer"},r.a.createElement("select",{onChange:function(t){return e.onDifficultyChange(t.target.value)},value:e.difficulty,name:"difficulty",id:"difficulty"},r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard"),r.a.createElement("option",{value:"extreme"},"Extreme")))},k=n(14),S=n.n(k);S.a.initializeApp({apiKey:"AIzaSyC9b2ljxk-omeIWR3bDOFvkRsLuYnxzoNk",authDomain:"minesweeper-7c394.firebaseapp.com",databaseURL:"https://minesweeper-7c394.firebaseio.com",projectId:"minesweeper-7c394",storageBucket:"minesweeper-7c394.appspot.com",messagingSenderId:"168745128025",appId:"1:168745128025:web:91b428db1db811585be148"});var x=S.a.firestore(),w=S.a,N=n(64),_=(n(60),function(e){return o.a.createPortal(r.a.createElement("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),B=(n(61),function(e){var t=r.a.createElement("div",{className:"Modal ".concat(e.className),style:e.style},r.a.createElement("header",{className:"modal__header ".concat(e.headerClass)},r.a.createElement("h2",null,e.header)),r.a.createElement("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",{className:"modal__content ".concat(e.contentClass)},e.children),r.a.createElement("footer",{className:"modal__footer ".concat(e.footerClass)},e.footer)));return o.a.createPortal(t,document.getElementById("modal-hook"))}),F=function(e){return r.a.createElement(r.a.Fragment,null,e.show&&r.a.createElement(_,{onClick:e.onCancel}),r.a.createElement(N.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal"},r.a.createElement(B,e)))},I={easy:15,medium:30,hard:50,extreme:90},M=function(e,t,n){var a=[],r=!0,c=!1,o=void 0;try{for(var i,u=function(){var n=i.value;a.push(e.filter((function(e){return e[t]===n})))},s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)u()}catch(l){c=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(c)throw o}}return a};var D=function(){var e=Object(a.useState)(15),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(Array(n*n).fill()),u=Object(m.a)(o,2),f=u[0],b=u[1],v=Object(a.useState)("easy"),h=Object(m.a)(v,2),O=h[0],j=h[1],E=Object(a.useState)(!1),C=Object(m.a)(E,2),k=C[0],S=C[1],N=Object(a.useState)([]),_=Object(m.a)(N,2),B=_[0],D=_[1],A=Object(a.useState)(!1),z=Object(m.a)(A,2),G=z[0],P=z[1],T=Object(a.useState)(),W=Object(m.a)(T,2),L=W[0],R=W[1],U=Object(a.useContext)(d),J=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){x.collection("scores").onSnapshot((function(t){console.log("onSnapshot Called!");var n=t.docs.map((function(e){return e.data()}));e(n)}),t)}));case 2:t=e.sent,console.log(t),D(M(t,"difficulty",["easy","medium","hard","extreme"]));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){J()}),[]);var Y=function(){var e=Array(n*n).fill().map((function(){return{hasBomb:!1,isClicked:!1,neighbors:0,isFlag:!1}})),t=Math.floor(Math.random()*(n*n-(U.mineCount+1)));Object(i.a)(Array(n*n).keys()).sort((function(){return Math.random()-.5})).slice(t,t+U.mineCount).forEach((function(t){return e[t].hasBomb=!0})),b(e),U.setFlagCount(0),U.setGameIsOver(!1),U.setWinner(!1),U.setTime("")};Object(a.useEffect)((function(){U.setMineCount(I[O]),Y()}),[n,O,U.mineCount]),Object(a.useEffect)((function(){U.winner&&P(!0)}),[U]);var H=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:L,time:U.time,difficulty:O},console.log(n),a=w.firestore(),e.next=6,a.collection("scores").add(n);case 6:P(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App",onContextMenu:function(e){return e.preventDefault()},onMouseUp:function(){return S(!1)},onMouseDown:function(){return S(!0)}},r.a.createElement(F,{show:G,onCancel:function(){return P(!1)},header:r.a.createElement("h3",null,"Congratulations"),footer:r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"submit__button",onClick:H},"Add Score"),r.a.createElement("button",{className:"submit__button",onClick:function(){return P(!1)},type:"submit"},"Cancel"))},r.a.createElement("article",null,"You cleared all the mines in ",U.time,", if you want to add your score to the scoreboard please enter a display Name"),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"username"},"Display Name "),r.a.createElement("input",{type:"text",id:"username",value:L,onChange:function(e){return R(e.target.value)}})),r.a.createElement(g,{mouseDown:k,onClick:Y}),r.a.createElement(p,{board:f,dimension:n}),r.a.createElement(y,{onDifficultyChange:j,difficulty:O,dimension:[n,c]}),r.a.createElement("div",{className:"scores"},B.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("div",{className:"scores__header"},Object.keys(I)[t]),e.map((function(e){return r.a.createElement("div",null,e.username," : "," ",e.time)})))}))))};o.a.render(r.a.createElement((function(e){var t=Object(a.useState)(0),n=Object(m.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),u=Object(m.a)(i,2),s=u[0],l=u[1],f=Object(a.useState)(!1),b=Object(m.a)(f,2),v=b[0],h=b[1],O=Object(a.useState)(50),p=Object(m.a)(O,2),j=p[0],E=p[1],C=Object(a.useState)(),g=Object(m.a)(C,2),y=g[0],k=g[1];return r.a.createElement(d.Provider,{value:{flagCount:c,setFlagCount:o,gameIsOver:s,setGameIsOver:l,winner:v,setWinner:h,mineCount:j,setMineCount:E,time:y,setTime:k}},e.children)}),null,r.a.createElement(D,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.c36475a9.chunk.js.map