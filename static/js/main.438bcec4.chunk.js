(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{28:function(e,t,n){e.exports=n(63)},34:function(e,t,n){},39:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(7),o=n.n(c),i=n(11),u=n(12),s=n.n(u),l=n(26),m=n(15),f=n(4),b=(n(34),n(16)),d=n(18),v=Object(a.createContext)({flagCount:0,setFlagCount:function(){},gameIsOver:!1,setGameIsOver:function(){}}),O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(!(e<0||t<0||e>=n||t>=n))return n*e+t},h=function(e,t){var n=e%t;return[Math.floor(e/t),n]},j=function(e){var t=Object(a.useState)({}),n=Object(f.a)(t,2),c=n[0],o=n[1],u=Object(f.a)(e.board,2),s=u[0],l=u[1],m=Object(a.useState)(!1),j=Object(f.a)(m,2),E=j[0],p=j[1],C=Object(a.useContext)(v);Object(a.useEffect)((function(){o((function(t){return e.tile||t}))}),[e]);var g=e.boardSize,y=e.boardDimension,k=function(){C.setFlagCount(s.reduce((function(e,t,n){return t.isFlag?e+1:e}),0)),C.setWinner(s.reduce((function(e,t){return t.isClicked?e+1:e}),0)===s.length-C.mineCount&&s.reduce((function(e,t){return t.isFlag&&t.hasBomb?e+1:e}),0)===s.reduce((function(e,t){return t.hasBomb?e+1:e}),0))};return r.a.createElement("button",{onContextMenu:function(t){var n=Object(i.a)(s);!n[e.index].isClicked&&(C.mineCount-C.flagCount>0||n[e.index].isFlag)&&(n[e.index].isFlag=!n[e.index].isFlag,l(n)),k()},onClick:function(t){!function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Object(i.a)(s),r=a[t];if(!r.isClicked&&(!r.isFlag||n)){a[t].isClicked=!0,a[t].hasBomb&&(C.setGameIsOver(!0),a.forEach((function(t,n){return e(n,!0)})));var c=h(t,y),o=Object(f.a)(c,2),u=o[0],m=o[1];if(!a[t].hasBomb){for(var b=-1;b<2;b++)for(var d=-1;d<2;d++){var v=O(b+u,d+m,y);a[v]&&(a[t].neighbors+=a[v].hasBomb?1:0)}if(a[t].neighbors<=0)for(var j=-1;j<2;j++)for(var E=-1;E<2;E++){var p=O(j+u,E+m,y),g=a[p];g&&!g.hasBomb&&p!==t&&e(p)}}l(a)}}(e.index),k()},onMouseOver:function(e){1!==e.buttons&&2!==e.buttons||p(!0)},onMouseUp:function(){return p(!1)},onMouseLeave:function(){return p(!1)},className:"tile ".concat(c.isClicked&&"inset"," ").concat(!c.isClicked&&E&&"no-bomb inset"," ").concat(c.isClicked&&!c.hasBomb&&"no-bomb"),style:{width:g/y,height:g/y}},c.isClicked&&c.hasBomb&&r.a.createElement(b.a,{icon:d.a}),(!c.isClicked||c.hasBomb)&&c.isFlag&&r.a.createElement(b.a,{style:{color:"red"},icon:d.b}),c.isClicked&&!c.hasBomb&&c.neighbors>0?c.neighbors:"")},E=(n(39),function(e){var t=Object(a.useState)([]),n=Object(f.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(500),u=Object(f.a)(i,2),s=u[0];u[1];Object(a.useEffect)((function(){o(e.board)}),[e]);var l={gridTemplateColumns:"repeat(".concat(e.dimension,", 1fr)")};return r.a.createElement("div",{className:"game-board",style:l},c.map((function(t,n){return r.a.createElement(j,{key:n,index:n,tile:t,board:[c,o],boardDimension:e.dimension,boardSize:s})})))}),p=n(24),C=n.n(p),g=n(25),y=function(e){var t=Object(g.useStopwatch)({autoStart:!0}),n=t.seconds,c=t.minutes,o=(t.start,t.pause),i=t.reset,u=Object(a.useState)(":)"),s=Object(f.a)(u,2),l=s[0],m=s[1],b=Object(a.useState)(!1),d=Object(f.a)(b,2),O=d[0],h=d[1],j=Object(a.useContext)(v);Object(a.useEffect)((function(){h(e.mouseDown)}),[e]),Object(a.useEffect)((function(){m(j.winner?"\ud83d\ude0e":j.gameIsOver?"\u2620\ufe0f":O?":o":":)")}),[O,j]),Object(a.useEffect)((function(){(j.gameIsOver||j.winner)&&(o(),j.setTime("".concat(c<10?"0":"").concat(c,":").concat(n<10?"0":"").concat(n)))}),[j]);var E=Object(a.useState)("one"),p=Object(f.a)(E,2);p[0],p[1];return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__text"},"0",j.mineCount-j.flagCount),r.a.createElement("button",{onClick:function(){e.onClick(),i()},className:"header__button"},r.a.createElement(C.a,{className:"emoji",text:l})),r.a.createElement("div",{className:"header__text"},c<10&&"0",c,":",n<10&&"0",n))},k=function(e){Object(a.useContext)(v);var t=Object(f.a)(e.dimension,2);t[0],t[1];return r.a.createElement("footer",{className:"footer"},r.a.createElement("select",{onChange:function(t){return e.onDifficultyChange(t.target.value)},value:e.difficulty,name:"difficulty",id:"difficulty"},r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard"),r.a.createElement("option",{value:"extreme"},"Extreme")))},x=n(19),S=n.n(x);S.a.initializeApp({apiKey:"AIzaSyC9b2ljxk-omeIWR3bDOFvkRsLuYnxzoNk",authDomain:"minesweeper-7c394.firebaseapp.com",databaseURL:"https://minesweeper-7c394.firebaseio.com",projectId:"minesweeper-7c394",storageBucket:"minesweeper-7c394.appspot.com",messagingSenderId:"168745128025",appId:"1:168745128025:web:91b428db1db811585be148"});var w=S.a,N=n(65),_=(n(61),function(e){return o.a.createPortal(r.a.createElement("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),B=(n(62),function(e){var t=r.a.createElement("div",{className:"Modal ".concat(e.className),style:e.style},r.a.createElement("header",{className:"modal__header ".concat(e.headerClass)},r.a.createElement("h2",null,e.header)),r.a.createElement("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",{className:"modal__content ".concat(e.contentClass)},e.children),r.a.createElement("footer",{className:"modal__footer ".concat(e.footerClass)},e.footer)));return o.a.createPortal(t,document.getElementById("modal-hook"))}),F=function(e){return r.a.createElement(r.a.Fragment,null,e.show&&r.a.createElement(_,{onClick:e.onCancel}),r.a.createElement(N.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal"},r.a.createElement(B,e)))},I={easy:5,medium:30,hard:50,extreme:90},M=function(e,t,n){var a=[],r=!0,c=!1,o=void 0;try{for(var i,u=function(){var n=i.value;a.push(e.filter((function(e){return e[t]===n})))},s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)u()}catch(l){c=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(c)throw o}}return a};var D=function(){var e=Object(a.useState)(15),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(Array(n*n).fill()),u=Object(f.a)(o,2),b=u[0],d=u[1],O=Object(a.useState)("easy"),h=Object(f.a)(O,2),j=h[0],p=h[1],C=Object(a.useState)(!1),g=Object(f.a)(C,2),x=g[0],S=g[1],N=Object(a.useState)([]),_=Object(f.a)(N,2),B=_[0],D=_[1],A=Object(a.useState)(!1),z=Object(f.a)(A,2),G=z[0],T=z[1],W=Object(a.useState)(),L=Object(f.a)(W,2),P=L[0],R=L[1],U=Object(a.useContext)(v),J=function(){var e=Object(m.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.firestore(),e.next=3,t.collection("scores").get();case 3:n=e.sent,a=n.docs.map((function(e){return Object(l.a)({},e.data(),{id:e.id})})),D(M(a,"difficulty",["easy","medium","hard","extreme"])),console.log(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){J()}),[]);var Y=function(){var e=Array(n*n).fill().map((function(){return{hasBomb:!1,isClicked:!1,neighbors:0,isFlag:!1}})),t=Math.floor(Math.random()*(n*n-(U.mineCount+1)));Object(i.a)(Array(n*n).keys()).sort((function(){return Math.random()-.5})).slice(t,t+U.mineCount).forEach((function(t){return e[t].hasBomb=!0})),d(e),U.setFlagCount(0),U.setGameIsOver(!1),U.setWinner(!1),U.setTime("")};Object(a.useEffect)((function(){U.setMineCount(I[j]),Y()}),[n,j,U.mineCount]),Object(a.useEffect)((function(){U.winner&&T(!0)}),[U]);var H=function(){var e=Object(m.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:P,time:U.time,difficulty:j},console.log(n),a=w.firestore(),e.next=6,a.collection("scores").add(n);case 6:T(!1),J();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App",onContextMenu:function(e){return e.preventDefault()},onMouseUp:function(){return S(!1)},onMouseDown:function(){return S(!0)}},r.a.createElement(F,{show:G,onCancel:function(){return T(!1)},header:r.a.createElement("h3",null,"Congratulations"),footer:r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"submit__button",onClick:H},"Add Score"),r.a.createElement("button",{className:"submit__button",onClick:function(){return T(!1)},type:"submit"},"Cancel"))},r.a.createElement("article",null,"You cleared all the mines in ",U.time,", if you want to add your score to the scoreboard please enter a display Name"),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"username"},"Display Name "),r.a.createElement("input",{type:"text",id:"username",value:P,onChange:function(e){return R(e.target.value)}})),r.a.createElement(y,{mouseDown:x,onClick:Y}),r.a.createElement(E,{board:b,dimension:n}),r.a.createElement(k,{onDifficultyChange:p,difficulty:j,dimension:[n,c]}),r.a.createElement("div",{className:"scores"},B.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("div",{className:"scores__header"},Object.keys(I)[t]),e.map((function(e){return r.a.createElement("div",null,e.username," : "," ",e.time)})))}))))};o.a.render(r.a.createElement((function(e){var t=Object(a.useState)(0),n=Object(f.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),u=Object(f.a)(i,2),s=u[0],l=u[1],m=Object(a.useState)(!1),b=Object(f.a)(m,2),d=b[0],O=b[1],h=Object(a.useState)(50),j=Object(f.a)(h,2),E=j[0],p=j[1],C=Object(a.useState)(),g=Object(f.a)(C,2),y=g[0],k=g[1];return r.a.createElement(v.Provider,{value:{flagCount:c,setFlagCount:o,gameIsOver:s,setGameIsOver:l,winner:d,setWinner:O,mineCount:E,setMineCount:p,time:y,setTime:k}},e.children)}),null,r.a.createElement(D,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.438bcec4.chunk.js.map